{"mappings":"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","sources":["src/js/index.js","src/js/books-container.js","src/js/home-category.js","src/js/adding-to-local-storage.js"],"sourcesContent":["import './home__support';\nimport './home-category';\n\nimport './home__support';\n\nimport './books-container';\nimport './dark-theme';\nimport './modal-window/modal';\nimport './header';\nimport './auth';\nimport './adding-to-local-storage';\n","import { fetchTopBooks } from './books-api';\nconst refs = {\n  categoriesList: document.querySelector('.books-in-categories-list'),\n  booklistTitle: document.querySelector('.booklist-title'),\n};\n\nlocalStorage.setItem('booksToBuy', JSON.stringify([]));\n\nfetchTopBooks().then(renderAllCards);\nexport async function renderAllCards(data) {\n  let booksArr = [];\n  refs.booklistTitle.innerHTML = lastWordChange('Best Sellers Books');\n  data.forEach(category => {\n    let markup_base = `<li class=\"category-item\">\n    <h3 class=\"book-category-title\">${category.books[0].list_name}</h3>\n    <ul class=\"bookslist\">`;\n    let markup = ``;\n\n    category.books.map(book => {\n      booksArr.push(book);\n      markup =\n        markup +\n        `\n      <li class=\"book-card book-card-main\" data-id=\"${book._id}\">\n        <div class=\"thumb book-cover-container\">\n          <img class=\"book-cover\" src=\"${book.book_image}\" alt=\"${book.title}\" loading=\"lazy\" />\n          <div class=\"overlay-book\">\n            <p class=\"hidden-card\">quick view</p>\n          </div>\n        </div>\n        <h4 class=\"book-title\">${book.title}</h4>\n        <p class=\"book-author-name\">${book.author}</p>\n      </li>`;\n    });\n    markup_base =\n      markup_base +\n      markup +\n      `</ul>\n        <div class=\"see-more-btn-container\" >\n        <button class=\"see-more-btn\" data-category-name=\"${category.books[0].list_name}\">See more</button>\n        </div>\n      </li>`;\n    refs.categoriesList.insertAdjacentHTML('beforeend', markup_base);\n  });\n\n  localStorage.setItem('books', JSON.stringify(booksArr));\n}\n\n\n\n\nexport function lastWordChange(string) {\n  let markup = `${string.slice(0, string.lastIndexOf(' '))}\n    <span class=\"category-last-word\">${string.slice(\n      string.lastIndexOf(' '),\n      string.length\n    )}</span>`;\n  return markup;\n}\n","import { lastWordChange } from './books-container';\nimport { renderAllCards} from './books-container';\nimport { fetchTopBooks, fetchBookCategories, fetchBookByCategory } from './books-api';\nconst refs = {\n  divEl: document.querySelector('.category-list'),\n  allcategory: document.querySelector('.all-category'),\n  onecategoryEl: document.querySelector('.category-link'),\n  categoriesList: document.querySelector('.books-in-categories-list'),\n};\nfetchBookCategories().then(data => {\n   const firstCategoryMarkup = `<li class=\"list category-item\">\n            <a class=\"link category-link is-active\" href=\"#\" id=\"all\">All categories</a>\n        </li>`\n  refs.divEl.insertAdjacentHTML('beforeend', firstCategoryMarkup);\n  data.map(book => {\n    const markup = `<li class=\"list category-item\">\n        <a class=\"link category-link\" href=\"#\">${book.list_name}</a>\n      </li>`;\n    refs.divEl.insertAdjacentHTML('beforeend', markup);\n  });\n});\n// refs.allcategory.focus()\nrefs.divEl.addEventListener('click', onCategoryClick);\nfunction onCategoryClick(e) {\n  if (!e.target.classList.contains('category-link')) {\n    return;\n  }\n  e.preventDefault();\n  let activeBook = document.querySelector('.is-active');\n  if (activeBook) {\n    activeBook.classList.remove('is-active');\n  }\n  e.target.classList.add('is-active');\n  let titleCategory = document.querySelector('.booklist-title');\n  \n  if (e.target.id === \"\") {\n    let titleTextContent = e.target.textContent;\n    titleCategory.innerHTML = lastWordChange(titleTextContent);\n    refs.categoriesList.classList.add('render-category');\n    fetchBookByCategory(e.target.textContent).then(data =>\n      renderMarkupBooksByCategory(takeBookMarkupByCategory(data))\n    );\n  }\n  else {\n    refs.categoriesList.innerHTML = \"\";\n    titleCategory.innerHTML = lastWordChange(\"Best Sellers Books\");\n    refs.categoriesList.classList.add('render-category');\n    fetchTopBooks().then(renderAllCards);\n  }\n\n}\nfunction takeBookMarkupByCategory(books) {\n  let markup = books\n    .map(({ author, title, book_image, _id }) => {\n      return `\n      <li class=\"book-card render-item-card\" data-id=\"${_id}\">\n        <div class=\"thumb book-cover-container\">\n          <img class=\"book-cover\" src=\"${book_image}\" alt=\"${title}\" loading=\"lazy\" />\n         <div class=\"overlay-book\"><p class=\"hidden-card\">quick view</p>\n       </div>\n        </div>\n        <h4 class=\"book-title\">${title}</h4>\n        <p class=\"book-author-name\">${author}</p>\n      </li>`;\n    })\n    .join('');\n  return markup;\n}\nfunction renderMarkupBooksByCategory(markup) {\n  refs.categoriesList.innerHTML = markup;\n}\n\nrefs.categoriesList.addEventListener('click', onMoreBtnClick);\n\nfunction onMoreBtnClick(e) {\n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  let activeBook = document.querySelector('.is-active')\n    activeBook.classList.remove('is-active');\n\n  const links = document.querySelectorAll(\".category-link\");\n  links.forEach(link => {\n    if (link.textContent === e.target.getAttribute('data-category-name')) {\n      link.classList.add('is-active');\n      link.scrollIntoView();\n    }\n  });\n    let titleCategory = document.querySelector('.booklist-title');\n    titleCategory.innerHTML = lastWordChange(e.target.getAttribute('data-category-name'));\n    refs.categoriesList.classList.add('render-category');\n    fetchBookByCategory(e.target.getAttribute('data-category-name')).then(data =>\n      renderMarkupBooksByCategory(takeBookMarkupByCategory(data))\n    );\n}","const shoplist = document.querySelector('.modal-add-btn');\n\nshoplist.addEventListener('click', addToLocalStorage);\n\nfunction addToLocalStorage() {\n    \n    \n}"],"names":["parcelRequire","$bpxeT","$81f227f14aa3ea55$var$refs","categoriesList","document","querySelector","booklistTitle","$81f227f14aa3ea55$export$d0dcf78a1d3f26d0","data","$81f227f14aa3ea55$var$_renderAllCards","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","booksArr","innerHTML","$81f227f14aa3ea55$export$c3a8808a3b438752","forEach","category","markup_base","concat","books","list_name","markup","map","book","push","_id","book_image","title","author","insertAdjacentHTML","localStorage","setItem","JSON","stringify","string","slice","lastIndexOf","length","$fepPP","fetchTopBooks","then","$a366ac799e387d2c$var$refs","divEl","allcategory","onecategoryEl","$a366ac799e387d2c$var$takeBookMarkupByCategory","param","join","$a366ac799e387d2c$var$renderMarkupBooksByCategory","fetchBookCategories","addEventListener","e","target","classList","contains","preventDefault","activeBook","remove","add","titleCategory","id","titleTextContent","textContent","fetchBookByCategory","nodeName","querySelectorAll","link","getAttribute","scrollIntoView"],"version":3,"file":"index.1032429b.js.map"}